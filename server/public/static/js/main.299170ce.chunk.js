(this["webpackJsonppatuky__booky-web"]=this["webpackJsonppatuky__booky-web"]||[]).push([[0],{23:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(1),c=n(16),r=n.n(c),i=(n(23),n(2)),l=n(3),o={get:function(e){var t=JSON.parse(localStorage.getItem(e));return null!==t?t:""},remove:function(e){localStorage.removeItem(e)},set:function(e,t){localStorage.setItem(e,JSON.stringify(t))}},u=function(e){var t=Object(s.useState)(""),n=Object(i.a)(t,2),c=n[0],r=n[1],l=Object(s.useState)(""),o=Object(i.a)(l,2),u=o[0],j=o[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{className:"login__title title",children:"Inicia sesi\xf3n"}),Object(a.jsxs)("form",{action:"",className:"login__form form",onSubmit:function(t){t.preventDefault(),e.handlesignIn({userName:c,password:u}),t.target.reset()},children:[Object(a.jsx)("label",{htmlFor:"name",className:"login__form--label label",children:"Introduce tu usuario"}),Object(a.jsx)("input",{type:"text",id:"name",placeholder:"Ej: Laura",className:"login__form--input input",onChange:function(e){r(e.target.value)},required:!0}),Object(a.jsx)("label",{htmlFor:"password",className:"login__form--label label",children:"Introduce tu contrase\xf1a"}),Object(a.jsx)("input",{type:"text",id:"password",className:"login__form--input input",onChange:function(e){j(e.target.value)},required:!0}),Object(a.jsx)("input",{type:"submit",value:"Inicia sesi\xf3n",className:"login__form--button btn"})]}),Object(a.jsx)("p",{className:"confirmUser__text",children:e.loginError})]})},j=function(e){var t=Object(s.useState)(""),n=Object(i.a)(t,2),c=n[0],r=n[1],l=Object(s.useState)(""),o=Object(i.a)(l,2),u=o[0],j=o[1],d=Object(s.useState)(""),m=Object(i.a)(d,2),b=m[0],h=m[1];return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("details",{children:[Object(a.jsx)("summary",{className:"login__title title",children:"Crear Usuario"}),Object(a.jsxs)("form",{action:"",className:"login__form form",onSubmit:function(t){t.preventDefault(),u===b&&(e.handleSignUp({userName:c,password:u}),t.target.reset())},children:[Object(a.jsx)("label",{htmlFor:"name",className:"login__form--label label",children:"Introduce un usuario"}),Object(a.jsx)("input",{type:"text",id:"name",placeholder:"Ej: Laura",className:"login__form--input input",onChange:function(e){r(e.target.value)},required:!0}),Object(a.jsx)("label",{htmlFor:"password",className:"login__form--label label",children:"Introduce una contrase\xf1a"}),Object(a.jsx)("input",{type:"text",id:"password",className:"login__form--input input",onChange:function(e){j(e.target.value)},required:!0}),Object(a.jsx)("label",{htmlFor:"password",className:"login__form--label label",children:"Repite la contrase\xf1a"}),Object(a.jsx)("input",{type:"text",id:"password",className:"login__form--input input",onChange:function(e){h(e.target.value)},required:!0}),Object(a.jsx)("input",{type:"submit",value:"Inicia sesi\xf3n",className:"login__form--button btn"})]}),Object(a.jsx)("p",{className:"confirmUser__text",children:e.loginError}),Object(a.jsx)("p",{children:e.createError})]})})},d=function(e){return Object(a.jsxs)("section",{className:"landing",children:[Object(a.jsx)("h1",{className:"landing__title",children:"PatukyFest"}),Object(a.jsxs)("p",{className:"landing__text",children:["Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque eaque incidunt architecto vel possimus, itaque, quas ipsam id alias beatae porro magnam quisquam ea nisi voluptate! Pariatur placeat nam harum."," "]}),Object(a.jsx)(u,{handlesignIn:e.handlesignIn,loginError:e.loginError}),Object(a.jsx)(j,{handleSignUp:e.handleSignUp,createError:e.createError})]})},m=function(e){return Object(a.jsxs)("article",{className:"searchFilm",children:[Object(a.jsx)("img",{className:"searchFilm__poster",src:e.image,alt:"Poster: ".concat(e.title)}),Object(a.jsx)("h2",{className:"searchFilm__Name",children:e.title})]})},b=function(e){var t=Object(s.useState)(""),n=Object(i.a)(t,2),c=n[0],r=n[1],l=function(t){r(t.currentTarget.id),e.handleFilm({filmId:c})},o=e.allFilms.map((function(e){return Object(a.jsx)("li",{className:"film__list",id:e.id,onClick:l,children:Object(a.jsx)(m,{title:e.title,image:e.image,id:e.id})},e.id)}));return Object(a.jsx)("ul",{className:"films",children:o})},h=function(e){var t=Object(s.useState)(""),n=Object(i.a)(t,2),c=n[0],r=n[1];return Object(a.jsx)("div",{children:Object(a.jsxs)("form",{action:"",children:[Object(a.jsx)("label",{htmlFor:"filmName"}),Object(a.jsx)("input",{type:"text",id:"filmName",onChange:function(e){r(e.currentTarget.value)}}),Object(a.jsx)("input",{type:"submit",onClick:function(){e.handleSearchFilm(c)}})]})})},O=n(8),p=function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("header",{className:"header",children:[Object(a.jsx)("button",{className:"header__button",onClick:function(){e.signOff()},children:Object(a.jsx)(O.b,{to:"/",children:"Cerrar sesi\xf3n"})}),Object(a.jsx)(O.b,{to:"/usuario",children:e.userName})]})})},f=function(){return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsx)("nav",{children:Object(a.jsxs)("ul",{className:"footer__list",children:[Object(a.jsx)("li",{children:"G"}),Object(a.jsx)("li",{children:"L"}),Object(a.jsx)("li",{children:"T"}),Object(a.jsx)("li",{children:"M"})]})})})},x=function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(p,{userName:e.userName,signOff:e.signOff}),Object(a.jsxs)("div",{className:"main",children:[Object(a.jsxs)("section",{className:"mainPage",children:[Object(a.jsx)("h2",{className:"title",children:"Secci\xf3n principal"}),Object(a.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Totam optio, repellendus molestias officia quos voluptatum doloribus magni quasi sapiente quidem temporibus aspernatur nihil asperiores, impedit saepe unde vel pariatur quam."})]}),Object(a.jsxs)("details",{children:[Object(a.jsx)("summary",{children:"Buscador de pel\xedculas"}),Object(a.jsx)(h,{handleSearchFilm:e.handleSearchFilm}),Object(a.jsx)(b,{allFilms:e.allFilms,handleFilm:e.handleFilm})]})]}),Object(a.jsx)(f,{})]})},g=function(e){var t=Object(s.useState)(""),n=Object(i.a)(t,2),c=n[0],r=n[1],l=Object(s.useState)(""),o=Object(i.a)(l,2),u=o[0],j=o[1];return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("details",{children:[Object(a.jsx)("summary",{className:"title",children:"Cambiar datos del usuario"}),Object(a.jsxs)("form",{action:"",className:"form ",onSubmit:function(t){t.preventDefault(),e.handleUserUpdate({userNameUpdate:c,passwordUpdate:u}),t.target.reset()},children:[Object(a.jsx)("label",{htmlFor:"name",className:"label",children:"Cambia tu usuario"}),Object(a.jsx)("input",{type:"text",id:"name",placeholder:"Ej: Laura",className:"input ",onChange:function(e){r(e.target.value)}}),Object(a.jsx)("label",{htmlFor:"password",className:"label",children:"Cambia tu contrase\xf1a"}),Object(a.jsx)("input",{type:"text",id:"password",className:"input js-password",onChange:function(e){j(e.target.value)}}),Object(a.jsx)("input",{type:"submit",value:"Actualizar Usuario",className:"btn"})]}),Object(a.jsx)("p",{className:"confirmUser__text",children:e.updateMessage})]})})},N=function(e){return Object(a.jsx)("div",{className:"container__delete",children:Object(a.jsxs)("details",{children:[Object(a.jsx)("summary",{className:"title",children:"Borrar usuario"}),Object(a.jsxs)("p",{className:"notices",children:["*Atenci\xf3n: El usuario y las listas de libros se borrar\xe1n permanentemente."," "]}),Object(a.jsx)("button",{onClick:function(){e.handleUserDelete()},className:"btn delete__btn",children:"Borrar usuario"}),Object(a.jsx)("p",{className:"confirmUser__text",children:e.deleteMessage})]})})},_=function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(p,{userName:e.userName,signOff:e.signOff}),Object(a.jsx)("section",{className:"main",children:Object(a.jsxs)("details",{children:[Object(a.jsx)("summary",{className:"title",children:"Opciones del usuario"}),Object(a.jsxs)("div",{className:"container__userData",children:[Object(a.jsx)(g,{handleUserUpdate:e.handleUserUpdate,updateMessage:e.updateMessage}),Object(a.jsx)(N,{handleUserDelete:e.handleUserDelete,deleteMessage:e.deleteMessage})]})]})}),Object(a.jsx)(O.b,{to:"/",children:"Volver"})]})},S="//localhost:3000/api",v={sendLogin:function(e){return fetch("".concat(S,"/login"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}))},sendUserDelete:function(e){return fetch("".concat(S,"/delete/").concat(e),{method:"POST"}).then((function(e){return e.json()}))},sendUserUpdate:function(e,t){return fetch("".concat(S,"/update/").concat(t),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}))},sendSignUp:function(e){return fetch("".concat(S,"/create"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}))}},y="https://imdb-api.com/en/API",F={searchFilm:function(e){return fetch("".concat(y,"/SearchMovie/k_0i4wyq32/").concat(e)).then((function(e){return e.json()}))},searchInfoFilm:function(e){return fetch("".concat(y,"/Wikipedia/k_0i4wyq32/").concat(e)).then((function(e){return e.json()}))}},U=function(){var e=o.get("user"),t=Object(s.useState)(e.userId||""),n=Object(i.a)(t,2),c=n[0],r=n[1],u=Object(s.useState)(""),j=Object(i.a)(u,2),m=j[0],b=j[1],h=Object(s.useState)(""),O=Object(i.a)(h,2),p=O[0],f=O[1],g=Object(s.useState)(""),N=Object(i.a)(g,2),S=N[0],y=N[1],U=Object(s.useState)(""),w=Object(i.a)(U,2),I=w[0],C=w[1],q=Object(s.useState)(e.userName),k=Object(i.a)(q,2),E=k[0],T=k[1],D=Object(s.useState)([]),M=Object(i.a)(D,2),P=M[0],L=M[1];console.log(c);var J=function(e){v.sendLogin(e).then((function(e){e.error?b(e.message):(b(""),r(e.userId),o.set("user",e),T(e.userName))}))},A=function(e){v.sendSignUp(e).then((function(e){e.error,f(""),f(e.message)}))},B=function(e){v.sendUserUpdate(e,c).then((function(e){console.log(e),e.error,C(""),C(e.message)}))},z=function(){v.sendUserDelete(c).then((function(e){console.log(e),e.error?y(e.message):(o.remove("user"),window.location.reload())}))},G=function(){o.remove("user"),window.location.reload()},R=function(e){F.searchFilm(e).then((function(e){L(e.results)}))},V=function(e){F.searchInfoFilm(e).then((function(e){console.log(e)}))};return""===c?Object(a.jsx)(d,{handlesignIn:J,loginError:m,handleSignUp:A,createError:p}):Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{exact:!0,path:"/",children:Object(a.jsx)(x,{userName:E,signOff:G,handleSearchFilm:R,allFilms:P,handleFilm:V})}),Object(a.jsx)(l.a,{path:"/usuario",children:Object(a.jsx)(_,{signOff:G,handleUserUpdate:B,handleUserDelete:z,updateMessage:I,deleteMessage:S})})]})})};r.a.render(Object(a.jsx)(O.a,{children:Object(a.jsx)(U,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.299170ce.chunk.js.map